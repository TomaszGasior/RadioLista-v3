{% form_theme form 'radio_station/_radio_station_tabs_theme.html.twig' %}

<div class="tabbed-ui">
    <div>
        <h2>{{ 'radio_station.edit.heading.general'|trans }}</h2>

        {{ form_row(form.frequency, {'unit_label': get_frequency_label(radio_station.radioTable.frequencyUnit)}) }}
        {{ form_row(form.name) }}
        {{ form_row(form.radioGroup) }}
        {{ form_row(form.country) }}
    </div>
    <div>
        <h2>{{ 'radio_station.edit.heading.broadcast'|trans }}</h2>

        {{ form_row(form.location) }}
        {{ form_row(form.power, {'unit_label': 'kW'}) }}
        {{ form_row(form.polarization) }}
        {{ form_row(form.type) }}
        {{ form_row(form.localityType, {'attr': {'class': 'locality-type-input'}}) }}
        <div class="locality-city-wrapper">
            {{ form_row(form.localityCity) }}
        </div>

        <script>
        (function(){
            const LOCALITY_COUNTRY = '{{ constant('TYPE_COUNTRY', radio_station.locality) }}';
            let localityTypeInput = document.querySelector('.locality-type-input');
            let localityCityWrapper = document.querySelector('.locality-city-wrapper');

            let updateFieldVisibility = () => {
                localityCityWrapper.hidden = (localityTypeInput.value == LOCALITY_COUNTRY);
            };
            updateFieldVisibility();
            localityTypeInput.addEventListener('change', updateFieldVisibility);
            localityTypeInput.addEventListener('blur', updateFieldVisibility);
        })();
        </script>
    </div>
    <div>
        <h2>{{ 'radio_station.edit.heading.reception'|trans }}</h2>

        {{ form_row(form.distance, {'unit_label': 'km'}) }}
        {{ form_row(form.reception) }}
        {{ form_row(form.quality) }}
        {{ form_row(form.firstLogDate) }}
    </div>
    <div>
        <h2>{{ 'radio_station.edit.heading.personal'|trans }}</h2>

        {{ form_row(form.privateNumber) }}
        {{ form_row(form.marker) }}
        {{ form_row(form.externalAnchor) }}
        {{ form_row(form.comment) }}
    </div>
    <div>
        <h2>{{ 'radio_station.edit.heading.rds'|trans }}</h2>

        <noscript>
            <p class="information">
                {{ 'radio_station.edit.information.rds_popup'|trans }}
            </p>
        </noscript>

        <div class="radio-station-rds">
            {{ form_row(form.rdsPi) }}
            {{ form_row(form.rdsPs, {attr: {wrap: 'off'}}) }}
            {{ form_row(form.rdsRt, {attr: {wrap: 'off'}}) }}
            {{ form_row(form.rdsPty) }}
        </div>
    </div>
</div>
