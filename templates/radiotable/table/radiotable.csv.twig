{%- set escape_strategy = 'csv' -%}
{%- extends 'radiotable/table/radiotable.twig' -%}

{%- block heading_cell -%}
    {%- if column != radiotable.columns|first -%}
        ,
    {%- endif -%}

    {{- parent() -}}
{%- endblock -%}

{%- block cell_start -%}
    {%- if column != radiotable.columns|first -%}
        ,
    {%- endif -%}
{%- endblock -%}

{%- block row_start %}
{#- Print newline before each row. #}

{% endblock -%}

{%- block radiostation_locality -%}
    {%- if locality_is_network -%}
        {#- This string needs to be concatenated with "network" mark before escaping. -#}
        {%- set text = radiostation.locality.city ~ block('radiostation_locality_network') -%}
        {#- Without this syntax Twig escapes this text automatically using HTML filter. -#}
        {{- text|escape('csv')|raw -}}
    {%- else -%}
        {{ parent() }}
    {%- endif -%}
{%- endblock -%}

{%- block radiostation_rds -%}
    {{ parent()|raw|replace({' ': '_'})|raw }}
    {#- This value is escaped with "csv" escaper in parent template. -#}
    {#- "raw" filter is needed. Without it Twig escapes this value second time. -#}
{%- endblock -%}
