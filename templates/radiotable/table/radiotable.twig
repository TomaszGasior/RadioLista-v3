{%- set columns_labels = {
    (constant('App\\Entity\\RadioTable::COLUMN_FREQUENCY')):      radiotable.useKhz ? 'kHz' : 'MHz',
    (constant('App\\Entity\\RadioTable::COLUMN_PRIVATE_NUMBER')): 'Nr',
    (constant('App\\Entity\\RadioTable::COLUMN_NAME')):           'Nazwa',
    (constant('App\\Entity\\RadioTable::COLUMN_RADIO_GROUP')):    'Grupa',
    (constant('App\\Entity\\RadioTable::COLUMN_COUNTRY')):        'Kraj',
    (constant('App\\Entity\\RadioTable::COLUMN_LOCATION')):       'Lokalizacja',
    (constant('App\\Entity\\RadioTable::COLUMN_POWER')):          'Moc',
    (constant('App\\Entity\\RadioTable::COLUMN_POLARIZATION')):   'Pol.',
    (constant('App\\Entity\\RadioTable::COLUMN_TYPE')):           'Rodzaj',
    (constant('App\\Entity\\RadioTable::COLUMN_LOCALITY')):       'Lokalność',
    (constant('App\\Entity\\RadioTable::COLUMN_DISTANCE')):       'Odległość',
    (constant('App\\Entity\\RadioTable::COLUMN_QUALITY')):        'Jakość',
    (constant('App\\Entity\\RadioTable::COLUMN_RDS')):            'RDS',
    (constant('App\\Entity\\RadioTable::COLUMN_COMMENT')):        'Komentarz',
} -%}
{%- set polarization_labels = {
    (constant('App\\Entity\\RadioStation::POLARIZATION_HORIZONTAL')): 'pozioma',
    (constant('App\\Entity\\RadioStation::POLARIZATION_VERTICAL')):   'pionowa',
    (constant('App\\Entity\\RadioStation::POLARIZATION_CIRCULAR')):   'kołowa',
    (constant('App\\Entity\\RadioStation::POLARIZATION_VARIOUS')):    'różne',
} -%}
{%- set types_labels = {
    (constant('App\\Entity\\RadioStation::TYPE_MUSIC')):       'muzyczny',
    (constant('App\\Entity\\RadioStation::TYPE_UNIVERSAL')):   'uniwersalny',
    (constant('App\\Entity\\RadioStation::TYPE_INFORMATION')): 'informacyjny',
    (constant('App\\Entity\\RadioStation::TYPE_RELIGIOUS')):   'katolicki',
    (constant('App\\Entity\\RadioStation::TYPE_OTHER')):       'inny',
} -%}

{# This template is abstract. Child templates can specify escaping strategy. #}
{# Autoescaping needs to be disabled when "escape" filter is used with variable as argument. #}
{# Each printed value needs to be escaped manually by "|escape(escape_strategy)" construct! #}
{%- set escape_strategy = escape_strategy|default('html') -%}
{%- autoescape false -%}

{%- block table_start -%}{%- endblock -%}

{%- for column in radiotable.columns -%}
    {%- block heading_cell columns_labels[column] -%}
{%- endfor -%}

{%- block table_between -%}{%- endblock -%}

{%- for radiostation in radiostations -%}
    {%- block row_start -%}{%- endblock -%}
        {%- for column in radiotable.columns -%}
            {%- block cell_start -%}{%- endblock -%}

                {%- if column == 'name' -%}
                    {%- block radiostation_name radiostation.name|escape(escape_strategy) -%}
                {%- elseif column == 'privateNumber' and radiostation.privateNumber is not null -%}
                    {%- block radiostation_private_number radiostation.privateNumber|escape(escape_strategy) -%}
                {%- elseif column == 'frequency' -%}
                    {%- block radiostation_frequency radiostation.frequency|number_format|escape(escape_strategy) -%}
                {%- elseif column == 'power' and radiostation.power is not null -%}
                    {%- block radiostation_power radiostation.power|number_format|escape(escape_strategy) -%}
                {%- elseif column == 'type' -%}
                    {%- block radiostation_type types_labels[radiostation.type]|escape(escape_strategy) -%}
                {%- elseif column == 'polarization' and radiostation.polarization -%}
                    {%- block radiostation_polarization radiostation.polarization|escape(escape_strategy) -%}
                {%- elseif column == 'quality' -%}
                    {%- block radiostation_quality radiostation.quality|escape(escape_strategy) -%}

                {%- elseif column == 'locality' -%}
                    {%- set locality_is_network = radiostation.locality.type == constant('LOCALITY_NETWORK', radiostation) -%}

                    {%- block radiostation_locality -%}
                        {%- if radiostation.locality.type == constant('LOCALITY_COUNTRY', radiostation) -%}
                            ogólnokrajowy
                        {%- elseif radiostation.locality.city -%}
                            {{- radiostation.locality.city|escape(escape_strategy) -}}

                            {%- if locality_is_network -%}
                                {%- block radiostation_locality_network ' (s)' -%}
                            {%- endif -%}
                        {%- endif -%}
                    {%- endblock -%}

                {%- elseif column == 'rds' -%}
                    {%- set rds_rt = radiostation.rds.rt|strip_newlines -%}
                    {%- set rds_pty = radiostation.rds.pty|strip_newlines -%}
                    {%- set rds_ps_frames = radiostation.rds.ps|strip_newlines|split('|')|format_rds_frames -%}
                    {%- set rds_pi = radiostation.rds.pi|strip_newlines -%}

                    {%- if rds_ps_frames|first|trim -%}
                        {%- block radiostation_rds rds_ps_frames|first|escape(escape_strategy) -%}
                    {%- endif -%}

                {%- elseif column == 'comment' -%}
                    {%- block radiostation_comment radiostation.comment|escape(escape_strategy) -%}

                {%- else -%}
                    {{- attribute(radiostation, column)|escape(escape_strategy) -}}
                {%- endif -%}

            {%- block cell_end -%}{%- endblock -%}
        {%- endfor -%}
    {%- block row_end -%}{%- endblock -%}
{%- endfor -%}

{%- block table_end -%}{%- endblock -%}

{%- endautoescape -%}
