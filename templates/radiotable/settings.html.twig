{% extends 'layout.html.twig' %}

{% block page_title %}Ustawienia wykazu{% endblock %}

{% block head_closing %}
    <script src="{{ asset('radiotable-settings.js') }}"></script>
{% endblock %}

{% block context_menu %}
    <ul>
        <li><a href="{{ path('radiotable.show', {id: radiotable.id}) }}">Zobacz wykaz</a></li>
        <li><a href="{{ path('radiostation.add', {radioTableId: radiotable.id}) }}">Dodaj stację</a></li>
        <li><a href="{{ path('radiotable.remove', {id: radiotable.id}) }}">Usuń wykaz</a></li>
    </ul>
{% endblock %}

{% block page_content %}
    <header>
        <h2>Ustawienia wykazu</h2>
    </header>

    {{ form_start(form) }}

    <div class="tabbed-ui">
        <div>
            <h3>Główne</h3>

            {{ form_row(form.name) }}
            {{ form_row(form.useKhz) }}
            {{ form_row(form.sorting) }}
            {{ form_row(form.description) }}
        </div>

        <div>
            <h3>Widoczność</h3>

            <div class="radiotable-status">
                {{ form_row(form.status) }}
            </div>
        </div>

        <div>
            <h3>Kolumny</h3>

            <noscript><p class="information">Kolejność kolumn wykazu jest uzależniona od przypisanych do nich liczb. Aby przenieść kolumnę, zmień jej liczbę. Aby ukryć kolumnę, wpisz liczbę ujemną. Aby skorzystać z&nbsp;wygodnego graficznego edytora kolumn, włącz JavaScript w&nbsp;przeglądarce.</p></noscript>

            <div class="radiotable-columns">
                {{ form_row(form.columns) }}

                <template class="radiotable-columns-buttons-template">
                    <button type="button" class="toggle" data-show-label="Pokaż" data-hide-label="Ukryj"></button>
                    <button type="button" class="move-up">Do góry</button>
                    <button type="button" class="move-down">W dół</button>
                </template>
            </div>
        </div>

        <div>
            <h3>Wygląd</h3>

            {# style="" is used as dirty hack for box-shadow removing. #}
            {{ form_row(form.appearanceTheme) }}
            {{ form_row(form.appearanceBackgroundColor, {attr: {
                'class': 'jscolor',
                'style': '',
                'data-jscolor': '{mode:\'HSV\', required:false, hash:true, borderRadius:0, borderWidth:0, shadowBlur:4}',
            }}) }}
            {{ form_row(form.appearanceColor, {attr: {
                'class': 'jscolor',
                'style': '',
                'data-jscolor': '{mode:\'HSV\', required:false, hash:true, borderRadius:0, borderWidth:0, shadowBlur:4}',
            }}) }}
            {{ form_row(form.appearanceBackgroundImage) }}
            {{ form_row(form.appearanceFullWidth) }}
        </div>

        <div id="export">
            <h3>Eksport</h3>

            {% if radiotable.radioStationsCount > 0 %}
                <p class="information">Wskaż format eksportu, aby pobrać cały wykaz w&nbsp;formie pliku na swój komputer. Wykaz eksportowany jest z&nbsp;aktualnie ustawionym sortowaniem i&nbsp;aktualnie widocznymi kolumnami. Pomijane są szczegółowe informacje o&nbsp;RDS oraz wyróżnienia wizualne.</p>

                <ul>
                    <li>
                        HTML – plik strony internetowej otwierany w&nbsp;przeglądarce
                        <a href="{{ path('radiotable.download', {id: radiotable.id, _format: 'html'}) }}">Pobierz plik HTML</a>
                    </li>
                    <li>
                        CSV – zestaw danych do zaimportowania w arkuszu kalkulacyjnym
                        <a href="{{ path('radiotable.download', {id: radiotable.id, _format: 'csv'}) }}">Pobierz plik CSV</a>
                    </li>
                    <li>
                        PDF – dokument elektroniczny do przeglądania i&nbsp;druku
                        <a href="{{ path('radiotable.download', {id: radiotable.id, _format: 'pdf'}) }}">Pobierz plik PDF</a>
                    </li>
                </ul>
            {% else %}
                <p class="information">Ten wykaz jest pusty. Nie można go wyeksportować.</p>
            {% endif %}
        </div>
    </div>

    <button>Zapisz</button>

    {{ form_end(form) }}
{% endblock %}
