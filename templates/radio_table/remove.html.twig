{% extends 'layout.html.twig' %}

{% block page_title %}Usuń stacje lub wykaz{% endblock %}

{% block context_menu %}
    <ul>
        <li>
            <a href="{{ path('radio_table.show', {id: radio_table.id}) }}">
                Zobacz wykaz
            </a>
        </li>
        <li>
            <a href="{{ path('radio_table.export', {id: radio_table.id}) }}">
                Eksport wykazu
            </a>
        </li>
        <li>
            <a href="{{ path('radio_table.settings', {id: radio_table.id}) }}">
                Ustawienia wykazu
            </a>
        </li>
    </ul>
{% endblock %}

{% form_theme form_radio_station _self %}
{% block _radio_station_remove_chosenToRemove_entry_label %}
    {% set unit_label = use_KHz ? 'kHz' : 'MHz' %}
    {% set label = label ~ ' (' ~ frequency|number_format ~ ' ' ~ unit_label ~ ')' %}
    {{ block('form_label') }}
{% endblock %}

{% block page_content %}
    <header>
        <h1 class="separated-title">
            <span>Usuń stacje lub wykaz</span>
            <span class="additional">{{ radio_table.name }}</span>
        </h1>
    </header>

    <div class="tabbed-ui">
        <div>
            <h2>Usuwanie stacji</h2>

            {% if radio_table.radioStationsCount > 0 %}
                {{ form_start(form_radio_station) }}

                <div class="radio-stations-remove">
                    {{ form_row(form_radio_station.chosenToRemove) }}
                </div>

                <button>Usuń zaznaczone stacje</button>

                {{ form_end(form_radio_station) }}
            {% else %}
                <p class="information">
                    Ten wykaz jest pusty. Nie ma czego usuwać&hellip;
                </p>
            {% endif %}
        </div>
        <div>
            <h2>Usuwanie wykazu</h2>

            <p class="information">
                Usunięcie wykazu jest nieodwracalne. Pamiętaj, że przed usunięciem możesz wyeksportować wykaz do&nbsp;pliku HTML, PDF lub CSV, aby pobrać go na komputer.
            </p>

            {{ form_start(form_radio_table) }}

            <div class="radio-table-remove-confirm">
                {{ form_row(form_radio_table.confirm, {
                    label: 'Usuń cały wykaz „' ~ radio_table.name ~ '” na zawsze'
                }) }}
            </div>

            <button>Usuń wykaz</button>

            {{ form_end(form_radio_table) }}

            <script>
            (function(){
                let input = document.querySelector('.radio-table-remove-confirm input');
                let confirmDialog = () => {
                    if (input.checked && false === window.confirm('Czy na pewno? Tej czynności nie można cofnąć!')) {
                        input.checked = false;
                        input.blur();
                    }

                    input.removeEventListener('change', confirmDialog);
                };
                input.addEventListener('change', confirmDialog);
            })();
            </script>
        </div>
    </div>
{% endblock %}
