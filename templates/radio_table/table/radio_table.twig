{%- set columns_labels = {
    (constant('App\\Entity\\RadioTable::COLUMN_COMMENT')): 'Komentarz',
    (constant('App\\Entity\\RadioTable::COLUMN_COUNTRY')): 'Kraj',
    (constant('App\\Entity\\RadioTable::COLUMN_DISTANCE')): 'km',
    (constant('App\\Entity\\RadioTable::COLUMN_EXTERNAL_ANCHOR')): 'Odn.',
    (constant('App\\Entity\\RadioTable::COLUMN_FIRST_LOG_DATE')): '1. odbiór',
    (constant('App\\Entity\\RadioTable::COLUMN_FREQUENCY')): radio_table.useKhz ? 'kHz' : 'MHz',
    (constant('App\\Entity\\RadioTable::COLUMN_LOCALITY')): 'Lokalność',
    (constant('App\\Entity\\RadioTable::COLUMN_LOCATION')): 'Lokalizacja',
    (constant('App\\Entity\\RadioTable::COLUMN_NAME')): 'Nazwa',
    (constant('App\\Entity\\RadioTable::COLUMN_POLARIZATION')): 'Pol.',
    (constant('App\\Entity\\RadioTable::COLUMN_POWER')): 'kW',
    (constant('App\\Entity\\RadioTable::COLUMN_PRIVATE_NUMBER')): 'Nr',
    (constant('App\\Entity\\RadioTable::COLUMN_QUALITY')): 'Jakość',
    (constant('App\\Entity\\RadioTable::COLUMN_RADIO_GROUP')): 'Grupa',
    (constant('App\\Entity\\RadioTable::COLUMN_RDS')): 'RDS',
    (constant('App\\Entity\\RadioTable::COLUMN_RDS_PI')): 'PI',
    (constant('App\\Entity\\RadioTable::COLUMN_RECEPTION')): 'Odbiór',
    (constant('App\\Entity\\RadioTable::COLUMN_TYPE')): 'Rodzaj',
} -%}
{%- set polarization_labels = {
    (constant('App\\Entity\\RadioStation::POLARIZATION_HORIZONTAL')): 'pozioma',
    (constant('App\\Entity\\RadioStation::POLARIZATION_VERTICAL')): 'pionowa',
    (constant('App\\Entity\\RadioStation::POLARIZATION_CIRCULAR')): 'kołowa',
    (constant('App\\Entity\\RadioStation::POLARIZATION_VARIOUS')): 'różne',
} -%}
{%- set reception_labels = {
    (constant('App\\Entity\\RadioStation::RECEPTION_REGULAR')): 'regularny',
    (constant('App\\Entity\\RadioStation::RECEPTION_TROPO')): 'tropo',
    (constant('App\\Entity\\RadioStation::RECEPTION_SCATTER')): 'scatter',
    (constant('App\\Entity\\RadioStation::RECEPTION_SPORADIC_E')): 'sporadic-E',
} -%}
{%- set types_labels = {
    (constant('App\\Entity\\RadioStation::TYPE_MUSIC')): 'muzyczny',
    (constant('App\\Entity\\RadioStation::TYPE_UNIVERSAL')): 'uniwersalny',
    (constant('App\\Entity\\RadioStation::TYPE_INFORMATION')): 'informacyjny',
    (constant('App\\Entity\\RadioStation::TYPE_RELIGIOUS')): 'katolicki',
    (constant('App\\Entity\\RadioStation::TYPE_OTHER')): 'inny',
} -%}

{# This template is abstract. Child templates can specify escaping strategy. #}
{# Autoescaping needs to be disabled when "escape" filter is used with variable as argument. #}
{# Each printed value needs to be escaped manually by "|escape(escape_strategy)" construct! #}
{%- set escape_strategy = escape_strategy|default('html') -%}
{%- autoescape false -%}

{%- block table_start -%}{%- endblock -%}

{%- for column in radio_table.columns -%}
    {%- block heading_cell columns_labels[column] -%}
{%- endfor -%}

{%- block table_between -%}{%- endblock -%}

{%- for radio_station in radio_stations -%}
    {%- block row_start -%}{%- endblock -%}
        {%- for column in radio_table.columns -%}
            {%- block cell_start -%}{%- endblock -%}
                {%- if attribute(radio_station, column) is not null -%}

                {%- if column == 'name' -%}
                    {%- block radio_station_name radio_station.name|escape(escape_strategy) -%}
                {%- elseif column == 'privateNumber' -%}
                    {%- block radio_station_private_number radio_station.privateNumber|escape(escape_strategy) -%}
                {%- elseif column == 'frequency' -%}
                    {%- block radio_station_frequency radio_station.frequency|number_format|escape(escape_strategy) -%}
                {%- elseif column == 'power' -%}
                    {%- block radio_station_power radio_station.power|soft_number_format|escape(escape_strategy) -%}
                {%- elseif column == 'type' -%}
                    {%- block radio_station_type types_labels[radio_station.type]|escape(escape_strategy) -%}
                {%- elseif column == 'reception' -%}
                    {%- block radio_station_reception reception_labels[radio_station.reception]|escape(escape_strategy) -%}
                {%- elseif column == 'polarization' -%}
                    {%- block radio_station_polarization radio_station.polarization|escape(escape_strategy) -%}
                {%- elseif column == 'quality' -%}
                    {%- block radio_station_quality radio_station.quality|escape(escape_strategy) -%}
                {%- elseif column == 'distance' -%}
                    {%- block radio_station_distance radio_station.distance|escape(escape_strategy) -%}
                {%- elseif column == 'firstLogDate' -%}
                    {%- block radio_station_first_log_date radio_station.firstLogDate|escape(escape_strategy) -%}
                {%- elseif column == 'comment' -%}
                    {%- block radio_station_comment radio_station.comment|escape(escape_strategy) -%}
                {%- elseif column == 'externalAnchor' -%}
                    {%- block radio_station_external_anchor radio_station.externalAnchor|escape(escape_strategy) -%}

                {%- elseif column == 'locality' -%}
                    {%- set locality_is_network = radio_station.locality.type == constant('LOCALITY_NETWORK', radio_station) -%}

                    {%- block radio_station_locality -%}
                        {%- if radio_station.locality.type == constant('LOCALITY_COUNTRY', radio_station) -%}
                            ogólnokrajowy
                        {%- elseif radio_station.locality.city -%}
                            {{- radio_station.locality.city|escape(escape_strategy) -}}

                            {%- if locality_is_network -%}
                                {%- block radio_station_locality_network ' (s)' -%}
                            {%- endif -%}
                        {%- endif -%}
                    {%- endblock -%}

                {%- elseif column == 'rds' -%}
                    {%- if radio_station.rds.ps|first and radio_station.rds.ps|first|first|trim -%}
                        {%- block radio_station_rds radio_station.rds.ps|first|first|replace({'_':' '})|align_rds_frame|escape(escape_strategy) -%}
                    {%- endif -%}

                {%- else -%}
                    {{- attribute(radio_station, column)|escape(escape_strategy) -}}
                {%- endif -%}

                {%- endif -%}
            {%- block cell_end -%}{%- endblock -%}
        {%- endfor -%}
    {%- block row_end -%}{%- endblock -%}
{%- endfor -%}

{%- block table_end -%}{%- endblock -%}

{%- endautoescape -%}
