<!doctype html>

<html class="{% block html_classes %}{% endblock %}" lang="{{ app.request.locale }}">
    <head>
        <meta name="viewport" content="initial-scale=1">
        <meta name="description" content="RadioLista — twoje wykazy radiowe i telewizyjne, bandscany, regularne wykazy odbieranych stacji, prywatne listy ulubionych stacji.">

        <base href="{{ app.request.schemeAndHttpHost }}">
        <link rel="icon" href="{{ asset('icon.png') }}">
        <link rel="apple-touch-icon" href="{{ asset('icon.png') }}">
        <link rel="stylesheet" href="{{ asset('main.css', 'minified') }}">
        <link rel="stylesheet" media="(max-width: 800px)" href="{{ asset('mobile.css', 'minified') }}">
        <script src="{{ asset('common.js', 'minified') }}"></script>

        {% if block('page_title') %}
            <title>{% block page_title %}{% endblock %} — RadioLista</title>
        {% else %}
            <title>RadioLista — bandscany i wykazy radiowe</title>
        {% endif %}

        {% block head_closing %}{% endblock %}
    </head>

    <body class="customizable-background">
        <header class="site-header {{ 'dev' == app.environment ? 'develop' : '' }}">
            <div class="site-width">
                <a href="{{ path('homepage') }}" class="site-logo">RadioLista</a>

                <nav class="site-navigation">
                    <h2 class="sr-only">Menu główne</h2>

                    <ul class="user-menu">
                        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                            <li class="username">
                                {% if app.user.publicProfile %}
                                    <a href="{{ path('user.public_profile', {name: app.user.name}) }}">
                                        {{ app.user.name }}
                                    </a>
                                {% else %}
                                    {{ app.user.name }}
                                {% endif %}
                            </li>
                            <li><a href="{{ path('user.my_radiotables') }}">Moje wykazy</a></li>
                            <li><a href="{{ path('user.my_account_settings') }}">Moje konto</a></li>
                            <li><a href="{{ path('security.logout') }}">Wyloguj się</a></li>
                        {% else %}
                            <li><a href="{{ path('security.login') }}">Zaloguj się</a></li>
                            <li><a href="{{ path('user.register') }}">Zarejestruj się</a></li>
                        {% endif %}
                    </ul>

                    <div class="context-menu">
                        {% block context_menu %}{% endblock %}
                    </div>
                </nav>
            </div>

            {% set notifications = app.flashes %}
            {% if notifications %}
                {% set notification_type = notifications|keys|last %}
                {% set notification_text = notifications|last|last %}
                <span class="notification-wrapper" role="alert">
                    <span class="notification {{ notification_type }}">
                        {{ notification_text }}
                    </span>
                </span>
            {% endif %}
        </header>

        <main class="main-content site-width">
            {% block page_content %}{% endblock %}
        </main>

        <footer class="site-footer customizable-color">
            <p>&copy; Tomasz Gąsior 2012-2020</p>
            <p><span class="sr-only">Wersja aplikacji:</span> v{{ version }}</p>
            <ul>
                <li><a href="{{ path('about_service') }}">O stronie</a></li>
                <li><a href="{{ path('contact') }}">Kontakt</a></li>
                <li><a href="{{ path('terms_of_service') }}">Regulamin</a></li>
                <li><a href="{{ path('all_radiotables') }}">Wszystkie wykazy</a></li>
            </ul>
        </footer>

        {% block body_closing %}{% endblock %}
        {{ piwik_code() }}

        <script>if (document.documentMode) document.body.innerHTML = '<div style="font-size:20px;padding:20px;text-align:center;background:#663399;color:#fff"><b>Serwis RadioLista nie działa w przeglądarce Internet Explorer. Proszę, przełącz się na przeglądarkę Microsoft Edge.<br>Wciśnij skrót Ctrl+Shift+E na klawiaturze lub wyszukaj Microsoft Edge w menu Start.</b></div>' + document.body.innerHTML;</script>
    </body>
</html>
